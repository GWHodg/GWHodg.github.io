<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>localStorage2</title>

<style>
</style>

<script>
	function save() {
		alert("Just take a screenshot!\n\n" +
			  "Will 'save' some selected input variables to 'localStorage' for later retrieval . . .");
		//https://stackoverflow.com/questions/21012580/is-it-possible-to-write-data-to-file-using-only-javascript
		/* https://stackoverflow.com/questions/29357931/how-to-save-a-javascript-variable:
					- can use localStorage on client side:						
							  localStorage.setItem("mykey",99); // set a variable
							  var varNumber = localStorage.getItem("mykey"); // retrieve variable */
		localStorage.setItem("mykey",99); // set a variable
		localStorage.setItem("guy3",document.getElementById("p3NAME").value); 
		localStorage.setItem("guy3HC",document.getElementById("p3HC").value); 
		localStorage.setItem("guy3H1scr",document.getElementById("p3h1").value); 
		localStorage.setItem("guy3H1pts",document.getElementById("SPp3h1").innerText); 	
	}
	function retrieve() {
		var varNumber = localStorage.getItem("mykey"); // retrieve variable
		var varName = localStorage.getItem("guy1"); // retrieve variable
		var varName2 = localStorage.getItem("guy2"); // retrieve variable	
	}	
	function replace() {	 
		/* onchange: */
		var vG1h1s = localStorage.getItem("g1H1s");	var vG2h1s = localStorage.getItem("g2H1s");
		var vG3h1s = localStorage.getItem("g3H1s"); var vG4h1s = localStorage.getItem("g4H1s");
		
		document.getElementById("p1h1").value = vG1h1s; document.getElementById("p2h1").value = vG2h1s;
		document.getElementById("p3h1").value = vG3h1s; document.getElementById("p4h1").value = vG4h1s;
	}
	
	function clearSAVED() {
		/*alert("Will CLEAR 'saved' inputs here!\n\n"+
			  "g1H1s PRE 'clear' = " + localStorage.getItem("g1H1s"));*/
		  let reply;
		  if (confirm("Are you SURE you want to CLEAR all 'saved' input?") == true) {
		    reply = "YES!";
		  } else {
		    reply = "NO!";
		  }
  		  alert(reply);
			  
			if ( reply=="YES!") {
				for (var h = 1; h < 19; h++) {
						for (var n = 1; n < 6; n++) {
							localStorage.setItem('g'+n+'H'+h+'s',""); document.getElementById("p"+n+"h"+h).value = "";
						}
				}
			}		
			hideMENU();		
		}	

</script>		
		
</head>

<body align=center style="background:ivory;">
	<h1><i>localStorage</i><br>File Write/Read</h1>
	<!--<input type="number" id="p1h12" onclick="changeGLOBAL('p1h12')" tabindex="56" onchange="localStorage.setItem('g1H12s',this.value);" onfocus="FOCUSfn('p1h12')" onblur="BLURfn('p1h12')"><span id='SPp1h12' style="border:1px solid white; border-radius:0px; padding:2px; font-weight:bold;">-->
<!--<TABLE border=1>
<TR><TD>-->	
	<div style="border:2px inset purple; width:50%; margin:auto; padding:10px;">	
	    <h3>WRITE to File</h3>
		<button id="b">export to CSV</button>
	    <script type="text/javascript">
	        function exportToCsv() {
				var p1NAME = localStorage.getItem("g1NAME"); var p2NAME = localStorage.getItem("g2NAME");
				var p3NAME = localStorage.getItem("g3NAME"); var p4NAME = localStorage.getItem("g4NAME");
				var p5NAME = localStorage.getItem("g5NAME");			
				var p1HC = localStorage.getItem("g1HC"); var p2HC = localStorage.getItem("g2HC");
				var p3HC = localStorage.getItem("g3HC"); var p4HC = localStorage.getItem("g4HC");
				var p5HC = localStorage.getItem("g5HC");			
				
				var vG1h1s = localStorage.getItem("g1H1s"); var vG2h1s = localStorage.getItem("g2H1s");
				var vG3h1s = localStorage.getItem("g3H1s"); var vG4h1s = localStorage.getItem("g4H1s");
				var vG5h1s = localStorage.getItem("g5H1s");			
				var vG1h2s = localStorage.getItem("g1H2s");	var vG2h2s = localStorage.getItem("g2H2s");
				var vG3h2s = localStorage.getItem("g3H2s"); var vG4h2s = localStorage.getItem("g4H2s");
				var vG5h2s = localStorage.getItem("g5H2s");
				var vG1h3s = localStorage.getItem("g1H3s");	var vG2h3s = localStorage.getItem("g2H3s"); /* test! */
				var vG3h3s = localStorage.getItem("g3H3s"); var vG4h3s = localStorage.getItem("g4H3s");
				var vG5h3s = localStorage.getItem("g5H3s");	
				
				var myCsv = "P1,P2,P3,P4,P5"+
							"\n"+p1HC+","+p2HC+","+p3HC+","+p4HC+","+p5HC+ 
							"\n"+p1NAME+","+p2NAME+","+p3NAME+","+p4NAME+","+p5NAME+ 
							"\n"+vG1h1s+","+vG2h1s+","+vG3h1s+","+vG4h1s+","+vG5h1s+ 
							"\n"+vG1h2s+","+vG2h2s+","+vG3h2s+","+vG4h2s+","+vG5h2s+
							"\n"+vG1h3s+","+vG2h3s+","+vG3h3s+","+vG4h3s+","+vG5h3s;
	            window.open('data:text/csv;charset=utf-8,' + escape(myCsv));
	        }
	        var button = document.getElementById('b');
	        button.addEventListener('click', exportToCsv);
	    </script>		
						<!-- myCsv ^ -> screen. 'Select All' > share > email to self > 
							select on email > share > create csv file -->
		<br>					
		<p style="text-align:left;">
		<b><u>iPad:</u></b> myCsv ^ -> screen. 'Select All' > share > email to self <i>(sends X 2)</i> >  
		select on email <i>(1/2)</i> > share > create csv (or <b>txt</b>) file.<br>
		<b><u>Pixel:</u></b> exports/writes to Google SHEETS (as csv file - <i>'download.csv'</i>).<br>
		<b><u>iPod:</u></b> > screen (like iPad) > select all > email. Then ? how to create file <i>(? In Pixel email select it > save/share to 'HodgGW' Google 'Drive' (Textastic folder) > read it from there).</i><br>
		</p>
		
	</div>
	<br>						
								<!--   <br><br>√√√√√√√√√√√√√√√√√√√√√√√√<br><br>   -->
<!--</TD><TD>-->
	<div style="border:2px outset blue; border-radius:5%; width:50%; margin:auto; padding:10px;">	
			<h3>READ file</h3>
			<script>
			var openFile = function(event) {
			  var input = event.target;
					//alert("'event' = "+event);
			  var reader = new FileReader();
			  reader.onload = function() {
			    var text = reader.result;
			    var node = document.getElementById('output');
			    node.innerText = text;
			    console.log(reader.result.substring(0, 200));
			  };
			  reader.readAsText(input.files[0]);
			};
			</script>
			<input type='file' accept='text/plain' onchange='openFile(event)' style="border:1px solid orange;"><br>
			<div id='output' style="border:2px dotted blue; width:80%; margin:auto;">
			  ...
			</div>
			
			<p style="text-align:left;">
			<b><u>iPad:</u></b> Download as txt file & 'splits' w/ ' ' > array!<br>
			<b><u>Pixel:</u></b> Appears to download as csv file from SHEETS w/o spaces. Would need to split w/ commas > array!<br>
			<b><u>iPod:</u></b>	NEED TO FIGURE OUT HOW TO GET EMAIL DATA FROM IPOD TO PIXEL FILE (? SHEETS). <i>?Looks like you MAY be able to <u>copy</u> it in email & <u>paste</u> in a SHEETS file (? 'download.csv')??</i> <b>In Pixel email select it > save/share to 'HodgGW' Google 'Drive' (Textastic folder) > read it from there.</b> <br>
			</p>
			
			<br>
			<button id='DIVtoVARbtn' onclick="DIVtoVAR()" style="FONT-WEIGHT: bold; FONT-SIZE:15px; COLOR:black; background:lime; border:3px solid black; border-radius:10px; opacity:95%;"><u><b>DIVtoVAR</b></u></button><br>
			
			<script>
				function DIVtoVAR() {
						var MyDiv1 = document.getElementById('output').innerHTML;
							//MyDiv2.innerHTML = MyDiv1.innerHTML; 
						alert("MyDiv1 = "+MyDiv1);
						var chr3 = MyDiv1.charAt(2);
							alert("3rd chr in 'MyDiv1' string = '"+chr3+"'");
						if ( chr3!="," ) {
							/* convert a text file to CSV file:
									1.split on line breaks
									2. split on white space
									3. join with commas
									4. join with new lines */							
								let txtTOcsv = MyDiv1.split('\n')                          // split lines
								            .map(line => line.split(/\s+/).join(','))  // split spaces then join with ,
								            .join('\n')                                // rejoin lines
								
											alert(".txt > .csv file conversion:\n"+
												  txtTOcsv);
											MyDiv1 = txtTOcsv;											  
						}
						
						
						const readArray = MyDiv1.split("<br>");
						alert("'readArray' contents:\n"+
							  "\t\treadArray[0]) ="+readArray[0]+
							  "\n\t\treadArray[1]) ="+readArray[1]+
							  "\n\t\treadArray[2]) ="+readArray[2]+
							  "\n\t\treadArray[3]) ="+readArray[3]+
							  "\n\t\treadArray[4]) ="+readArray[4]);
						
						//let p1h1 = readArray[4]; alert("p1h1 (readArray[4]) = "+p1h1);
						
						var pNMs = readArray[2]; var pHCs = readArray[1];
						var h1 = readArray[3]; var h2 = readArray[4];
							alert("pNMS array = "+pNMs+"\nh2 array = "+h2);
						const H2arr = h2.split(",");
								alert("H2arr[2] = "+H2arr[2]);
										
						
				}
			</script>

			<p style="text-align:left;">
				<b><u>iPad:</u></b> Convert content of div ('output') to variable ('myDiv1').  Then split > array?<br>	
				&emsp;<i>[<b><u>File</u>:</b> <b>On My iPad/</b>GScsv.csv.<u>txt</u> > <b>GSwrite.txt</b>]</i><br>	
			</p>
	</div>
	<br>
<!--</TD></TR>
<TR><TD colspan=2 valign=top>-->
	<!--insert 'applied sequence' here . . -->
<!--</TD></TR>
</TABLE>-->

							<!--	<br><br>√√√√√√√√√√√√√√√√√√√√√√√√<br><br>    --> 
<!--</TD><TD>-->
	<div style="border:3px dotted yellow; background:silver; border-radius:5%; width:60%; margin:auto; padding:10px; text-align:left;">	
		<h3>'Applied Sequence'</h3>
		<ul>
			<li>During Round
				<ul>
					<li>Score on PIXEL</li>
					<li>'export to CSV' > <i>download.csv</i> (? Google SHEETS) in 'Files'</li>
					<li>In Files/Downloads tap 'download(#).csv' > : > 'share & export' > </li>
					<li> > 'Send a copy' <i>(<u>CSV format</u>)</i> > email to self <i>(CH2@gm)</i> [e.g. 'frPXL31/856']</li>
				</ul>
			</li>
			
			
			<li>Post Round 
				<ul>
					<li>Calc on iPod <i>(if PXL > 'belly up')</i>
					<li>Open email <i>('frPXL..') . .</i></li>
					<li> . . tap to download <i>('download (1).csv')</i> . . </li>
					<li> . . -> 'save to files' > 'Add' in 'Textastic' folder <i>(in 'On My iPod')</i></li>
					<li>Can then 'choose file' in READ portion of 'WaltStuff' localStorage.html</li>
					<li> . . > convert read div to string <i>('DIVtoVAR' btn)</i> . .</li>
					<li> . . > convert string to array <i>(> scores by hole)</i> . .</li>
					<li> . . <b>THEN WILL HAVE TO BREAK DOWN EA H > INDIV SCORES!</b> . .</li>
				</ul>
			</li>
		</ul>
	</div>
	
	
	
	
	
	<div id="HOMEdiv" style="border-radius:10px; padding:5px;border:3px slategray outset; background:black; 	color:white; position:fixed; left:1em; top:10px;">
		<A class="" style="color:moccasin; font-size:50px;" href="GSsplash.html" style=""> &#x2302;<!--HOME symbol--></A>	
			<!-- class="HOMEclass" -->
	</div>	

	
</body>
</html>